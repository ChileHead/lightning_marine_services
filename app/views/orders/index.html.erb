<% content_for :title, 'All Orders' %>

<%= render 'orders/new_order_modal' %>

<%#= link_to 'Create New Order', new_order_path, class:'btn btn-outline-primary btn-block' %>

<br>

<%#= render 'orders/index' %>

<div class="card p-2">
  <table>
    <thead>
      <tr>
        <th>  </th>
        <th> Ship </th>
        <th> Vendor </th>
        <th> PO# </th>
        <th> Date Recieved </th>
        <th> Courrier </th>
        <th> Date Delivered </th>
        <th> Contents </th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @orders.each do |order| %>

        <tr class="">
          <!-- <span class="border border-2 border-green pb-20"> -->
            <td class="pb-10 px-2">
              <%= order.id %>
            </td>

            <td class="pb-10 px-2">
              <%= order.purchaser.name %>
            </td>

            <td class="pb-10 px-2">
              <%= order.vendor.name %>
            </td>

            <td class="pb-10 px-2">
              <%= order.po_number ||= "n/a" %>
            </td>

            <td class="pb-10 px-2">
              <%=  order.date_recieved ? order.date_recieved.try(:strftime,"%m/%d/%Y") : "n/a "%>
            </td>

            <td class="pb-10 px-2">
              <%= order.courrier ||= "n/a" %>
            </td>

            <td class="pb-10 px-2">
              <%=  order.date_delivered ? order.date_delivered.try(:strftime,"%m/%d/%Y") : "n/a "%>
            </td>

            <td class="pb-10 px-2">
              <% if order.order_content.present? %>

                Boxes: <%= order.order_content.box ||= "n/a" %>
                <br>
                Crates: <%= order.order_content.crate ||= "n/a" %>
                <br>
                Pallets: <%= order.order_content.pallet ||= "n/a" %>
                <br>
                Other: <%= order.order_content.other ||= "n/a" %>
                <br>
                <!-- Other Description: HIDDEN -->
                <%= order.order_content.other_description ||= "n/a" %>

              <% end %>
            </td>

            <td class="pl-4 pb-4 px-2">
              <%= link_to 'Show', order %> |
              <%= link_to 'Edit', edit_order_path(order) %> |
              <%= link_to 'Destroy', order, method: :delete, data: { confirm: 'Are you sure?' } %>
            </td>

        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<br>

<%#= link_to 'New Vendor', new_vendor_path %>
<!-- Modal Pop Up to select/add Purchaser -->
