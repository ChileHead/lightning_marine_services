<% content_for :title, "All #{@orders.count} Orders" %>

<div class="card p-4">
  <table class=" table table-striped" data-sort-name="name" data-sort-order="desc">
    <thead>
      <tr class=" align-middle">
        <!-- <th class="py-8"> OrderID</th>
        <th class="py-8"> Ship </th>
        <th class="py-8"> Vendor </th>
        <th class="py-8"> PO# </th>
        <th class="py-8"> Date Recieved </th>
        <th class="py-8"> Courrier </th>
        <th class="py-8"> Date Delivered </th>
        <th class="py-8"> Contents </th> -->


        <!-- FOR: First THs in Orders#index -->
        <!-- <th class="py-8"> <%= link_to "OrderID", :sort => "id" %> </th>
        <th class="py-8"> <%= link_to "Ship", :sort => "purchaser_id" %> </th>
        <th class="py-8"> <%= link_to "Vendor", :sort => "vendor_id" %> </th>
        <th class="py-8"> <%= link_to "PONumber", :sort => "po_number" %> </th>
        <th class="py-8"> <%= link_to "DateRecieved", :sort => "date_recieved" %> </th>
        <th class="py-8"> <%= link_to "Courrier", :sort => "courrier" %> </th>
        <th class="py-8"> <%= link_to "DateDelivered", :sort => "date_delivered" %> </th>
        <th class="py-8"> <%= link_to "Contents", :sort => "contents" %> </th> -->

        <!-- Params -->
        <!-- orders?sort=id -->
        <!-- orders?sort=purchaser -->
        <!-- orders?sort=vendor -->
        <!-- orders?sort=po_number -->
        <!-- orders?sort=date_recieved -->
        <!-- orders?sort=courrier -->
        <!-- orders?sort=date_delivered -->
        <!-- orders?sort=contents -->


        <th class="py-8 pretty"> <%= sortable "id", "ID" %> </th>
        <th class="py-8 pretty"> <%= sortable "purchaser_id", "Ship" %> </th>
        <th class="py-8 pretty"> <%= sortable "vendor_id" %> </th>
        <th class="py-8 pretty"> <%= sortable "po_number" %> </th>
        <th class="py-8 pretty"> <%= sortable "date_recieved" %> </th>
        <th class="py-8 pretty"> <%= sortable "courrier" %> </th>
        <th class="py-8 pretty"> <%= sortable "date_delivered" %> </th>
        <th class="py-8 pretty"> <%= sortable "id", "Content"  %> </th>





        <!-- <%# TableLogic.th_attr_names_arr.each do |resource_attr_name| %>
          <th class="py-8">
            <%##= link_to "#{resource_attr_name.humanize.upcase}", :sort => orders_path(order: resource_attr_name) %>

            <%#= link_to "#{resource_attr_name.humanize.upcase}", :sort => orders_path(order: resource_attr_name) %>

          </th>
        <%# end %> -->



      </tr>
    </thead>

    <tbody>


      <% @orders.each do |order| %>
      <tr>
            <!-- <%# TableLogic.th_attr_names_arr.each do |resource_attr_name| %>
              <td class="py-8 align-middle font-light">
                <%##= order.send(resource_attr_name)  %>
                <%#= order.send(resource_attr_name)  %>
              </td>
            <%# end %> -->

        <tr class="">
            <td class="py-8 align-middle font-light">
              <%= order.id %>
            </td>

            <td class="py-8 align-middle font-light">
              <%= "purchaser_id: #{order.purchaser_id}" %>
              <br>
              <%= link_to "#{order.purchaser.name}", purchaser_path(order.purchaser) %>
            </td>

            <td class="py-8 align-middle font-light">
              <%= "vendor_id: #{order.vendor_id}" %>
              <br>
              <%= link_to "#{order.vendor.name}", vendor_path(order.vendor) %>
            </td>

            <td class="py-8 align-middle font-light">
              <%= order.po_number ||= "n/a" %>
            </td>

            <td class="py-8 align-middle font-light">
              <%=  order.date_recieved ? order.date_recieved.try(:strftime,"%m/%d/%Y") : 'n/a' %>
            </td>

            <td class="py-8 align-middle font-light">
              <%= order.courrier ||= "n/a" %>
            </td>

            <td class="py-8 align-middle font-light">
              <%=  order.date_delivered ? order.date_delivered.try(:strftime,"%m/%d/%Y") : "n/a "%>
            </td>

            <td class="py-8 align-middle font-light">
              <% if order.order_content.present? %>

                <%= link_to(order_path(order)) do %>

                  Boxes: <%= order.order_content.box ||= "n/a" %>
                  <br>
                  Crates: <%= order.order_content.crate ||= "n/a" %>
                  <br>
                  Pallets: <%= order.order_content.pallet ||= "n/a" %>
                  <br>

                  <% if is_nil_and_zero(order.order_content.other) == false %>
                     <%= "Other: #{order.order_content.other}" %>
                    <br>
                    <%= "Description: #{order.order_content.other_description}" %>
                  <% end %>

                <% end %>
              <% end %>
            </td>
        </tr>

      <% end %>
    </tr>

    </tbody>
  </table>
</div>
