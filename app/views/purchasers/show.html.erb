<% content_for :title, "Ship: #{@purchaser.name}" %>
<% content_for :subtitle, "#{@orders.count} Orders" %>

<%= render 'shared/tab_table_options' %>
<%= render 'shared/new_order_on_show_modal' %>

  <table class="bg-white table table-striped border border-2">
    <thead>
      <tr>

        <th>
        <%= link_to "Order ID", purchaser_path(@purchaser, sort_option: 'id', sort_direction: sort_direction) %>
        </th>

        <th>
          <%= link_to "Vendor", purchaser_path(@purchaser, sort_option: 'vendor_name', sort_direction: sort_direction) %>
        </th>

        <th>
          PO Number
        </th>

        <th>
        <%= link_to "Date Recieved", purchaser_path(@purchaser, sort_option: 'date_recieved', sort_direction: sort_direction) %>
        </th>

        <th>
          Order Content
        </th>

        <th>
        <%= link_to "Courrier", purchaser_path(@purchaser, sort_option: 'courrier', sort_direction: sort_direction) %>
        </th>

        <th>
        <%= link_to "Date Delivered", purchaser_path(@purchaser, sort_option: 'date_delivered', sort_direction: sort_direction) %>
        </th>

      </tr>
    </thead>

    <tbody>
      <% @orders.each do |order| %>

        <tr class="">
          <!-- <span class="border border-2 border-green pb-20"> -->
            <td class="pb-10 px-2">
              <%= order.id %>
            </td>

            <td class="pb-10 px-2">
              <%= link_to "#{order.vendor.name}", vendor_path(order.vendor) %>
            </td>

            <td class="pb-10 px-2">
              <%= order.po_number ||= "n/a" %>
            </td>


            <td class="pb-10 px-2">
              <%=  order.date_recieved ? order.date_recieved.try(:strftime,"%m/%d/%Y") : "n/a "%>
            </td>

            <td class="pb-10 px-2">
              <% if order.order_content.present? %>

                <%= link_to(order_path(order)) do %>

                  Boxes: <%= order.order_content.box ||= "n/a" %>
                  <br>
                  Crates: <%= order.order_content.crate ||= "n/a" %>
                  <br>
                  Pallets: <%= order.order_content.pallet ||= "n/a" %>
                  <br>

                  <% if is_nil_and_zero(order.order_content.other) == false %>
                     <%= "Other: #{order.order_content.other}" %>
                    <br>
                    <%= "Description: #{order.order_content.other_description}" %>
                  <% end %>

                <% end %>
              <% end %>
            </td>

            <td class="pb-10 px-2">
              <%= order.courrier ||= "n/a" %>
            </td>


            <td class="pb-10 px-2">
              <%=  order.date_delivered ? order.date_delivered.try(:strftime,"%m/%d/%Y") : "n/a "%>
            </td>



            <!-- <td class="pl-4 pb-4 px-2">
              <%= link_to 'Show', order %> |
              <%= link_to 'Edit', edit_order_path(order) %> |
              <%= link_to 'Destroy', order, method: :delete, data: { confirm: 'Are you sure?' } %>
            </td> -->

        </tr>
      <% end %>
    </tbody>
  </table>
