<% content_for :title, "Vendor: #{@vendor.name}" if current_page == 'vendors#show' %>
<% content_for :order_number, "#{@orders.count} Orders" if current_page == 'vendors#show' %>

<% content_for :title, "Ship: #{@purchaser.name}" if current_page == 'purchasers#show' %>
<% content_for :order_number, "#{@orders.count} Orders" if current_page == 'purchasers#show' %>


<% resource = get_resource(controller_name) %>


<div class="card ">
  <table class=" py-8 table-striped" data-sort-name="name" >
    <thead>
      <tr class=" align-middle">
        <th class="py-8 ">  OrderID </th>

        <% if current_page == 'vendors#show' %>
        <th class="py-8 "> Ship </th>
        <% else %>
        <th class="py-8 "> Vendor </th>
        <% end %>

        <th class="py-8 "> PO# </th>
        <th class="py-8 "> Date Recieved </th>
        <th class="py-8 "> Courrier </th>
        <th class="py-8 "> Date Delivered </th>
        <th class="py-8 "> Contents </th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @orders.each do |order| %>

        <tr class="">
            <td>
              <%= order.id %>
            </td>

            <td>
              <%= link_to "#{order.vendor.name}", vendor_path(order.vendor) if current_page == 'purchasers#show'%>
              <%= link_to "#{order.purchaser.name}", purchaser_path(order.purchaser) if current_page == 'vendors#show'%>
            </td>

            <td>
              <%= order.po_number ||= "n/a" %>
            </td>

            <td>
              <%=  order.date_recieved ? order.date_recieved.try(:strftime,"%m/%d/%Y") : "n/a "%>
            </td>

            <td>
              <%= order.courrier ||= "n/a" %>
            </td>

            <td>
              <%=  order.date_delivered ? order.date_delivered.try(:strftime,"%m/%d/%Y") : "n/a "%>
            </td>

            <td class="py-8  ">
              <% if order.order_content.present? %>

                <%= link_to(order_path(order)) do %>

                  Boxes: <%= order.order_content.box ||= "n/a" %>
                  <br>
                  Crates: <%= order.order_content.crate ||= "n/a" %>
                  <br>
                  Pallets: <%= order.order_content.pallet ||= "n/a" %>
                  <br>

                  <% if is_nil_and_zero(order.order_content.other) == false %>
                     <%= "Other: #{order.order_content.other}" %>
                    <br>
                    <%= "Description: #{order.order_content.other_description}" %>
                  <% end %>

                <% end %>
              <% end %>
            </td>

        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<br>
